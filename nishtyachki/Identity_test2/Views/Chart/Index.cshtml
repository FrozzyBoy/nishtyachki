
@{
    //ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Index</h2>

<html>
<head>
    <title></title>
    <script type='text/javascript' src='http://www.google.com/jsapi'></script>
    <script type='text/javascript'>


        update();

        function update() {
            google.load('visualization', '1.1', { 'packages': ['annotationchart'] });
            google.setOnLoadCallback(drawChart);
        }
                
        function drawChart() {
            var data = new google.visualization.DataTable();
            data.addColumn('date', 'Date');
            data.addColumn('number', 'my number');
            
            console.log("drawchart run");
            
            //load data            
            $.getJSON("api/chartValues").success(function (values) {
                console.log("json load");
                data.addRows(values);

                var chart = new google.visualization.AnnotationChart(document.getElementById('chart_div'));

                var options = {
                    displayAnnotations: true,
                };

                chart.draw(data, options);

                console.log("end drawchart");

            });            
        }
    </script>
</head>

<body>
    <div id='chart_div' style='width: 900px; height: 500px;'></div>
</body>
</html>